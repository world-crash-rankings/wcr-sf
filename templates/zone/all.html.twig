{% extends 'base.html.twig' %}

{% block title %}Zones - World Crash Rankings{% endblock %}

{% block meta_description %}Complete list of Burnout 2 Crash Mode zones with current world records. View top scores, players, and statistics for all {{ zones|length }} tracks.{% endblock %}

{% block meta_keywords %}burnout 2 zones, crash mode tracks, world records, zone list{% endblock %}

{% block structured_data %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "ItemList",
  "name": "Burnout 2 Crash Mode Zones",
  "description": "Complete list of all crash mode zones with world records",
  "numberOfItems": {{ zones|length }},
  "itemListElement": [
    {% for zone in zones %}
    {
      "@type": "ListItem",
      "position": {{ loop.index }},
      "item": {
        "@type": "Place",
        "name": "{{ zone.name }}",
        "url": "{{ url('zone', {id: zone.id}) }}"
      }
    }{% if not loop.last %},{% endif %}
    {% endfor %}
  ]
}
</script>
{% endblock %}

{% block body %}
<h1>Zones</h1>

<div class="table-responsive">
    <table class="table table-hover">
        <tbody>
            {% for zone in zones %}
            <tr>
                {# Zone number and name - Short on mobile, full on desktop #}
                <td>
                    <a href="{{ path('zone', {id: zone.id}) }}">
                        <span class="d-none d-sm-inline">{{ zone.id }} - {{ zone.name }}</span>
                        <span class="d-sm-none">Z{{ zone.id }}</span>
                    </a>
                </td>

                {# Platform logos - Hidden on mobile #}
                <td class="text-center d-none d-sm-table-cell">
                    <img src="{{ asset('img/logos/xbox.png') }}" alt="Xbox" width="32" height="32" class="me-1">
                    <img src="{{ asset('img/logos/gc.png') }}" alt="GameCube" width="32" height="32" class="me-1">
                    <img src="{{ asset('img/logos/ps2.png') }}" alt="PS2" width="32" height="32">
                </td>

                {# World Record info #}
                {% if wrs[zone.id] is defined %}
                    {% set wr = wrs[zone.id] %}

                    {# Country flag - Smaller on mobile #}
                    <td class="text-center">
                        <img src="{{ asset('img/flags/32/' ~ wr.player.country.iso ~ '.png') }}"
                             alt="{{ wr.player.country.name }}"
                             title="{{ wr.player.country.name }}"
                             width="24" height="18" class="d-sm-none">
                        <img src="{{ asset('img/flags/32/' ~ wr.player.country.iso ~ '.png') }}"
                             alt="{{ wr.player.country.name }}"
                             title="{{ wr.player.country.name }}"
                             width="32" height="24" class="d-none d-sm-inline">
                    </td>

                    {# Player name #}
                    <td>
                        <span class="text-primary">{{ wr.player.name }}</span>
                    </td>

                    {# WR Score #}
                    <td class="text-end">
                        <strong>${{ wr.score|number_format(0, '.', ',') }}</strong>
                    </td>
                {% else %}
                    <td colspan="3"></td>
                {% endif %}
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
